<!-- Compact Inputs/Outputs Section - No Tabs, Side by Side -->
<div data-ng-hide="!tx" style="margin: 0; padding: 0;">
  
  <div style="display: flex; gap: 2px; flex-wrap: wrap; margin: 0;">
    
    <!-- INPUTS SECTION -->
    <div style="flex: 1; min-width: 400px; background: #fff; border: 1px solid #e7eaf3; border-radius: 4px;">
      <div style="background: #f8f9fa; padding: 4px 8px; border-bottom: 2px solid #e7eaf3;">
        <strong style="font-size: 13px;"><span translate>Inputs</span> ({{tx.vin.length}})</strong>
      </div>
      
      <div data-ng-if="tx.isCoinBase" style="padding: 8px; text-align: center; color: #6c757d; font-size: 12px;">
        <span class="glyphicon glyphicon-star" style="font-size: 20px; margin-bottom: 4px; display: block;"></span>
        <span translate>Newly Generated Coins (Coinbase)</span>
      </div>
      
      <table class="table table-hover" style="margin-bottom: 0; font-size: 12px;" data-ng-if="!tx.isCoinBase && tx.vin.length > 0">
        <tbody>
          <tr data-ng-repeat="vin in tx.vin" data-ng-show="$index < 10 || showAllInputs" style="border-bottom: 1px solid #f0f0f0;">
            <td style="padding: 3px 4px; vertical-align: middle; width: 30px; color: #6c757d; font-size: 11px;">{{vin.n}}</td>
            <td style="padding: 3px 4px; vertical-align: middle;">
              <div style="display: flex; align-items: center;">
                <a href="tx/{{vin.txid}}" style="margin-right: 6px; color: #6c757d;" title="From: {{vin.txid}}:{{vin.vout}}">
                  <span class="glyphicon glyphicon-link" style="font-size: 10px;"></span>
                </a>
                <span data-ng-show="vin.notAddr" style="font-family: monospace; font-size: 11px;">{{vin.addr}}</span>
                <a href="address/{{vin.addr}}" data-ng-show="!vin.notAddr" style="font-family: monospace; font-size: 11px;" data-ng-style="(vin.addr == address.addrStr || vin.addr == address.identityinfo.identity.identityaddress) && {'font-weight': 'bold', 'color': '#fff', 'background-color': '#3165D4', 'padding': '2px 6px', 'border-radius': '3px'} || {}">{{vin.addr}}</a>
                <span class="btn-copy" clip-copy="vin.addr" style="margin-left: 6px;"></span>
              </div>
              <div data-ng-show="vin.dbError" style="color: #dc3545; font-size: 10px;">
                <span class="glyphicon glyphicon-warning-sign"></span> {{vin.dbError}}
              </div>
              <div data-ng-show="vin.doubleSpentTxID" style="color: #dc3545; font-size: 10px;">
                <span class="glyphicon glyphicon-warning-sign"></span> <a href="tx/{{vin.doubleSpentTxID}}">Double Spend</a>
              </div>
            </td>
            <td style="padding: 3px 4px; vertical-align: middle; text-align: right; font-family: monospace; font-weight: 500; font-size: 11px; white-space: nowrap;">
              {{$root.currency.getConvertion(vin.value)}}
            </td>
          </tr>
        </tbody>
      </table>
      <div data-ng-if="!tx.isCoinBase && tx.vin.length > 10 && !showAllInputs" style="padding: 8px; text-align: center; border-top: 1px solid #f0f0f0;">
        <button class="btn btn-sm btn-default" ng-click="showAllInputs = true; $parent.showAllInputs = true" style="font-size: 11px;">
          <span class="glyphicon glyphicon-chevron-down"></span> Show All {{tx.vin.length}} Inputs
        </button>
      </div>
      <div data-ng-if="!tx.isCoinBase && tx.vin.length > 10 && showAllInputs" style="padding: 8px; text-align: center; border-top: 1px solid #f0f0f0;">
        <button class="btn btn-sm btn-default" ng-click="showAllInputs = false; $parent.showAllInputs = false" style="font-size: 11px;">
          <span class="glyphicon glyphicon-chevron-up"></span> Show Less
        </button>
      </div>
      
      <div data-ng-if="tx.vin.length == 0 && !tx.isCoinBase" style="padding: 15px; text-align: center; color: #6c757d; font-size: 12px;">
        <span translate>No Inputs</span>
      </div>
    </div>

    <!-- OUTPUTS SECTION -->
    <div style="flex: 1; min-width: 400px; background: #fff; border: 1px solid #e7eaf3; border-radius: 4px;">
      <div style="background: #f8f9fa; padding: 4px 8px; border-bottom: 2px solid #e7eaf3;">
        <strong style="font-size: 13px;"><span translate>Outputs</span> ({{tx.vout.length}})</strong>
      </div>
      
      <table class="table table-hover" style="margin-bottom: 0; font-size: 12px;" data-ng-if="tx.vout.length > 0">
        <tbody>
          <tr data-ng-repeat-start="vout in tx.vout" data-ng-show="$index < 10 || showAllOutputs" style="border-bottom: 1px solid #f0f0f0;">
            <td style="padding: 3px 4px; vertical-align: middle; width: 30px; color: #6c757d; font-size: 11px;">{{vout.n}}</td>
            <td style="padding: 3px 4px; vertical-align: top; min-width: 250px;">
              <!-- PBaaS output -->
              <div data-ng-if="vout.script_reserve_balance" style="display: flex; align-items: center;">
                <span class="glyphicon glyphicon-transfer" style="margin-right: 6px; color: #17a2b8; font-size: 10px;"></span>
                <span data-ng-show="vout.notAddr" style="font-family: monospace; font-size: 11px;">{{vout.scriptPubKey.addresses[0]}}</span>
                <a href="address/{{vout.scriptPubKey.addresses[0]}}" data-ng-show="!vout.notAddr" style="font-family: monospace; font-size: 11px;" data-ng-style="(vout.scriptPubKey.addresses[0] == address.addrStr || vout.scriptPubKey.addresses[0] == address.identityinfo.identity.identityaddress) && {'font-weight': 'bold', 'color': '#fff', 'background-color': '#3165D4', 'padding': '2px 6px', 'border-radius': '3px'} || {}">{{vout.scriptPubKey.addresses[0]}}</a>
                <span class="btn-copy" clip-copy="vout.scriptPubKey.addresses[0]" style="margin-left: 6px;"></span>
              </div>
              <!-- Cross-chain Reserve Transfer to Ethereum -->
              <div data-ng-if="vout.isCrossChainToEthereum && vout.actualDestination" style="display: flex; align-items: center; flex-wrap: wrap;">
                <span class="glyphicon {{vout.protocolIcon}}" data-ng-style="{'color': vout.protocolColor}" style="margin-right: 6px; font-size: 10px;"></span>
                <span data-ng-style="{'color': vout.protocolColor}" style="font-weight: 500; font-size: 11px; margin-right: 6px;">{{vout.protocolName}} → Ethereum:</span>
                <span style="font-family: monospace; font-size: 11px; color: #333;">{{vout.actualDestination}}</span>
                <span class="btn-copy" clip-copy="vout.actualDestination" style="margin-left: 6px;"></span>
                <a href="https://etherscan.io/address/{{vout.actualDestination}}" target="_blank" style="margin-left: 5px; text-decoration: none;">
                  <span style="display: inline-block; width: 14px; height: 14px; background-color: #627eea; border-radius: 50%; text-align: center; line-height: 14px; font-size: 10px; font-weight: bold; color: #fff; cursor: pointer; vertical-align: middle;" title="View on Etherscan">E</span>
                </a>
              </div>
              <!-- Protocol address with actual destination (non-Ethereum) -->
              <div data-ng-if="vout.isProtocolAddress && vout.actualDestination && !vout.isCrossChainToEthereum" style="display: flex; align-items: center; flex-wrap: wrap;">
                <span class="glyphicon {{vout.protocolIcon}}" data-ng-style="{'color': vout.protocolColor}" style="margin-right: 6px; font-size: 10px;"></span>
                <span data-ng-style="{'color': vout.protocolColor}" style="font-weight: 500; font-size: 11px; margin-right: 6px;" title="{{vout.protocolDescription}}">{{vout.protocolName}}:</span>
                <span style="font-family: monospace; font-size: 11px; color: #333;">{{vout.actualDestination}}</span>
                <span class="btn-copy" clip-copy="vout.actualDestination" style="margin-left: 6px;"></span>
              </div>
              <!-- Protocol address without actual destination -->
              <div data-ng-if="vout.isProtocolAddress && !vout.actualDestination && !vout.crosschainimport && !vout.feepool && !vout.acceptednotarization" style="display: flex; align-items: center; flex-wrap: wrap;">
                <span class="glyphicon {{vout.protocolIcon}}" data-ng-style="{'color': vout.protocolColor}" style="margin-right: 6px; font-size: 10px;"></span>
                <span data-ng-style="{'color': vout.protocolColor}" style="font-weight: 500; font-size: 11px;" title="{{vout.protocolDescription}}">{{vout.protocolName}}</span>
              </div>
              <!-- Fee Pool with currency values -->
              <div data-ng-if="vout.feepool" style="display: block;">
                <div style="display: flex; align-items: center; margin-bottom: 4px;">
                  <span class="glyphicon {{vout.protocolIcon}}" data-ng-style="{'color': vout.protocolColor}" style="margin-right: 6px; font-size: 10px;"></span>
                  <span data-ng-style="{'color': vout.protocolColor}" style="font-weight: 500; font-size: 11px;">{{vout.protocolName}}</span>
                </div>
                <div data-ng-if="vout.feepool.currencyvaluesFriendly" style="margin-left: 20px; margin-top: 4px;">
                  <div style="font-size: 10px; color: #6c757d; margin-bottom: 2px;">Currency Values:</div>
                  <div data-ng-repeat="(currency, amount) in vout.feepool.currencyvaluesFriendly" style="padding: 2px 0; font-size: 11px;">
                    <span style="font-weight: 500; color: #ffc107;">{{currency}}:</span>
                    <span style="font-family: monospace; margin-left: 6px;">{{amount}}</span>
                  </div>
                </div>
              </div>
              <!-- Accepted Notarization with proposer and currency -->
              <div data-ng-if="vout.acceptednotarization" style="display: block;">
                <div style="display: flex; align-items: center; margin-bottom: 4px;">
                  <span class="glyphicon {{vout.protocolIcon}}" data-ng-style="{'color': vout.protocolColor}" style="margin-right: 6px; font-size: 10px;"></span>
                  <span data-ng-style="{'color': vout.protocolColor}" style="font-weight: 500; font-size: 11px;">{{vout.protocolName}}</span>
                </div>
                <div style="margin-left: 20px; margin-top: 4px;">
                  <div data-ng-if="vout.acceptednotarization.currencyNameFriendly" style="padding: 2px 0; font-size: 11px;">
                    <span style="font-weight: 500; color: #28a745;">Chain:</span>
                    <span style="margin-left: 6px; color: #333;">{{vout.acceptednotarization.currencyNameFriendly}}</span>
                  </div>
                  <div data-ng-if="vout.acceptednotarization.proposer && vout.acceptednotarization.proposer.address" style="padding: 2px 0; font-size: 11px;">
                    <span style="font-weight: 500; color: #28a745;">Proposer:</span>
                    <a href="address/{{vout.acceptednotarization.proposer.address}}" style="font-family: monospace; margin-left: 6px; font-size: 11px;" data-ng-style="(vout.acceptednotarization.proposer.address == address.addrStr || vout.acceptednotarization.proposer.address == address.identityinfo.identity.identityaddress) && {'font-weight': 'bold', 'color': '#fff', 'background-color': '#3165D4', 'padding': '2px 6px', 'border-radius': '3px'} || {}">{{vout.acceptednotarization.proposer.address}}</a>
                    <span class="btn-copy" clip-copy="vout.acceptednotarization.proposer.address" style="margin-left: 6px;"></span>
                  </div>
                  <div data-ng-if="vout.acceptednotarization.notarizationheight" style="padding: 2px 0; font-size: 11px;">
                    <span style="font-weight: 500; color: #28a745;">Height:</span>
                    <span style="font-family: monospace; margin-left: 6px; color: #6c757d;">{{vout.acceptednotarization.notarizationheight}}</span>
                  </div>
                </div>
              </div>
              <!-- Cross-chain Import with valuein -->
              <div data-ng-if="vout.crosschainimport" style="display: block;">
                <div style="display: flex; align-items: center; margin-bottom: 4px;">
                  <span class="glyphicon glyphicon-import" style="margin-right: 6px; color: #20c997; font-size: 10px;"></span>
                  <span style="color: #20c997; font-weight: 500; font-size: 11px;">Cross-chain Import</span>
                </div>
                <div data-ng-if="vout.crosschainimport.valueinFriendly" style="margin-left: 20px; margin-top: 4px;">
                  <div style="font-size: 10px; color: #6c757d; margin-bottom: 2px;">Value In:</div>
                  <div data-ng-repeat="(currency, amount) in vout.crosschainimport.valueinFriendly" style="padding: 2px 0; font-size: 11px;">
                    <span style="font-weight: 500; color: #17a2b8;">{{currency}}:</span>
                    <span style="font-family: monospace; margin-left: 6px;">{{amount}}</span>
                  </div>
                </div>
                <div data-ng-if="vout.crosschainimport.exporttxid" style="margin-left: 20px; margin-top: 4px; font-size: 10px;">
                  <span style="color: #6c757d;">Export TX:</span>
                  <a href="tx/{{vout.crosschainimport.exporttxid}}" style="font-family: monospace; margin-left: 4px; font-size: 10px;">{{vout.crosschainimport.exporttxid}}</a>
                </div>
              </div>
              <!-- P2SH Output (OP_RETURN with P2SH) -->
              <div data-ng-if="vout.isP2SH && vout.p2shAddress" style="display: flex; align-items: center;">
                <span class="glyphicon glyphicon-link" style="margin-right: 6px; color: #9c27b0; font-size: 10px;"></span>
                <span style="font-weight: 500; font-size: 11px; color: #9c27b0; margin-right: 6px;">P2SH Output:</span>
                <a href="address/{{vout.p2shAddress}}" style="font-family: monospace; font-size: 11px; color: #9c27b0;">{{vout.p2shAddress}}</a>
                <span class="btn-copy" clip-copy="vout.p2shAddress" style="margin-left: 6px;"></span>
              </div>
              <!-- Standard output -->
              <div data-ng-if="!vout.script_reserve_balance && !vout.identityprimary && !vout.currencydefinition && !vout.othercommitment && !vout.isProtocolAddress && !vout.isP2SH" style="display: flex; align-items: center; flex-wrap: wrap;">
                <span data-ng-show="vout.notAddr" style="font-family: monospace; font-size: 11px;">{{vout.scriptPubKey.addresses[0]}}</span>
                <span data-ng-show="!vout.notAddr" data-ng-repeat="addr in vout.scriptPubKey.addresses" style="margin-right: 4px;">
                  <a href="address/{{addr}}" style="font-family: monospace; font-size: 11px;" data-ng-style="(addr == address.addrStr || addr == address.identityinfo.identity.identityaddress) && {'font-weight': 'bold', 'color': '#fff', 'background-color': '#3165D4', 'padding': '2px 6px', 'border-radius': '3px'} || {}">{{addr}}</a>
                </span>
                <span class="btn-copy" clip-copy="vout.scriptPubKey.addresses[0]" style="margin-left: 6px;"></span>
           
              </div>
              <!-- Identity -->
              <div data-ng-if="vout.identityprimary" style="display: block;">
                <span class="glyphicon glyphicon-user" style="margin-right: 6px; color: #007bff; font-size: 10px;"></span>
                <span translate>Identity:</span>
                <a href="address/{{vout.identityprimary.identityaddress}}" style="margin-left: 4px; font-weight: 500; font-size: 11px;">{{vout.identityprimary.name}}@</a>
                <a href="api/addr/{{vout.identityprimary.identityaddress}}" target="_blank" style="margin-left: 5px; text-decoration: none;">
                  <span style="display: inline-block; width: 14px; height: 14px; background-color: #2b6dd7; border-radius: 50%; text-align: center; line-height: 14px; font-size: 10px; font-weight: bold; color: #fff; cursor: pointer; vertical-align: middle;" title="View API JSON">i</span>
                </a>
              </div>
              <!-- Currency Definition -->
              <div data-ng-if="vout.currencydefinition" style="display: flex; align-items: center;">
                <span class="glyphicon glyphicon-usd" style="margin-right: 6px; color: #17a2b8; font-size: 10px;"></span>
                <span translate>Currency:</span>
                <!-- <a href="getcurrency?currency={{vout.currencydefinition.name}}" style="margin-left: 4px; font-weight: 500; font-size: 11px;">{{vout.currencydefinition.name}}</a> -->
                <span style="margin-left: 4px; font-weight: 500; font-size: 11px;">{{vout.currencydefinition.name}}</span>
                <!-- <a href="api/getcurrency/{{vout.currencydefinition.name}}" target="_blank" style="margin-left: 5px; text-decoration: none;">
                  <span style="display: inline-block; width: 14px; height: 14px; background-color: #17a2b8; border-radius: 50%; text-align: center; line-height: 14px; font-size: 10px; font-weight: bold; color: #fff; cursor: pointer; vertical-align: middle;" title="View Currency Details">i</span>
                </a> -->
              </div>
              <!-- Other Commitment -->
              <div data-ng-if="vout.othercommitment" style="display: flex; align-items: center;">
                <span class="glyphicon glyphicon-random" style="margin-right: 6px; color: #6c757d; font-size: 10px;"></span>
                <span style="font-weight: 500; font-size: 11px;">{{vout.othercommitment}}</span>
              </div>
            </td>
            <td style="padding: 3px 4px; vertical-align: middle; text-align: right; font-family: monospace; font-weight: 500; font-size: 11px; white-space: nowrap;">
              {{$root.currency.getConvertion(vout.value)}}
            </td>
            <td style="padding: 3px 4px; vertical-align: middle; text-align: center; width: 60px; font-size: 10px;">
              <span data-ng-show="vout.spentTxId" style="color: #dc3545;" title="Spent">
                <a href="tx/{{vout.spentTxId}}" style="color: #dc3545;">
                  <span class="glyphicon glyphicon-remove-circle" style="font-size: 11px;"></span> <span translate>S</span>
                </a>
              </span>
              <span data-ng-show="!vout.spentTxId" style="color: #28a745;" title="Unspent">
                <span class="glyphicon glyphicon-ok-circle" style="font-size: 11px;"></span> <span translate>U</span>
              </span>
            </td>
          </tr>
          <!-- PBaaS reserve currencies - only show if this vout has script_reserve_balance -->
          <tr data-ng-if="vout.script_reserve_balance" data-ng-repeat="(key, vout_currency) in vout.script_reserve_balance" data-ng-show="$parent.$index < 10 || showAllOutputs" style="border-bottom: 1px solid #f0f0f0;">
            <td style="padding: 3px 4px; vertical-align: middle; width: 30px; color: #6c757d; font-size: 11px;"></td>
            <td style="padding: 3px 4px; vertical-align: middle; padding-left: 30px;">
              <div style="display: flex; align-items: center;">
                <span style="color: #6c757d; font-size: 10px; margin-right: 6px;">└</span>
                <span style="color: #6c757d; font-size: 10px;">Currency Output</span>
              </div>
            </td>
            <td style="padding: 3px 4px; vertical-align: middle; text-align: right; font-family: monospace; font-weight: 500; font-size: 11px; white-space: nowrap;">
              <span style="font-weight: 500; font-size: 11px;">{{vout_currency}}</span> <span style="color: #6c757d; font-size: 10px;">{{key}}</span>
            </td>
            <td style="padding: 3px 4px; vertical-align: middle; text-align: center; width: 60px; font-size: 10px;"></td>
          </tr>
          <tr data-ng-repeat-end data-ng-show="$index < 10 || showAllOutputs"></tr>
        </tbody>
      </table>
      <div data-ng-if="tx.vout.length > 10 && !showAllOutputs" style="padding: 8px; text-align: center; border-top: 1px solid #f0f0f0;">
        <button class="btn btn-sm btn-default" ng-click="showAllOutputs = true; $parent.showAllOutputs = true" style="font-size: 11px;">
          <span class="glyphicon glyphicon-chevron-down"></span> Show All {{tx.vout.length}} Outputs
        </button>
      </div>
      <div data-ng-if="tx.vout.length > 10 && showAllOutputs" style="padding: 8px; text-align: center; border-top: 1px solid #f0f0f0;">
        <button class="btn btn-sm btn-default" ng-click="showAllOutputs = false; $parent.showAllOutputs = false" style="font-size: 11px;">
          <span class="glyphicon glyphicon-chevron-up"></span> Show Less
        </button>
      </div>
      
      <div data-ng-if="tx.vout.length == 0" style="padding: 15px; text-align: center; color: #6c757d; font-size: 12px;">
        <span translate>No Outputs</span>
      </div>
    </div>
  </div>

  <!-- SHIELDED TRANSACTIONS (if any) -->
  <div data-ng-if="(tx.spendDescs && tx.spendDescs.length > 0) || (tx.outputDescs && tx.outputDescs.length > 0) || (tx.vjoinsplit && tx.vjoinsplit.length > 0)" style="background: #fff; border: 1px solid #e7eaf3; border-radius: 4px; padding: 4px; margin-top: 2px;">
    <!-- Sapling Shielded -->
    <div data-ng-if="(tx.spendDescs && tx.spendDescs.length > 0) || (tx.outputDescs && tx.outputDescs.length > 0)">
      <h5 style="margin: 0 0 10px 0; font-size: 13px; font-weight: 600;">
        <span class="glyphicon glyphicon-lock" style="margin-right: 6px;"></span>
        <span translate>Shielded Transaction (Sapling)</span>
      </h5>
      <div style="background: #f8f9fa; border-radius: 4px; padding: 10px; display: flex; justify-content: space-around; text-align: center;">
        <div>
          <div style="color: #6c757d; font-size: 11px; margin-bottom: 4px;" translate>Shielded Spends</div>
          <div style="font-size: 16px; font-weight: 600;">{{tx.spendDescs.length}}</div>
        </div>
        <div>
          <div style="color: #6c757d; font-size: 11px; margin-bottom: 4px;" translate>Shielded Outputs</div>
          <div style="font-size: 16px; font-weight: 600;">{{tx.outputDescs.length}}</div>
        </div>
        <div data-ng-if="tx.valueBalance != null && tx.valueBalance != 0">
          <div style="color: #6c757d; font-size: 11px; margin-bottom: 4px;" translate>Shielded Amount</div>
          <div style="font-size: 16px; font-weight: 600;" data-ng-class="{'text-success': tx.valueBalance > 0, 'text-danger': tx.valueBalance < 0}">
            <span data-ng-show="tx.valueBalance > 0">{{$root.currency.getConvertion(tx.valueBalance)}} ↑</span>
            <span data-ng-show="tx.valueBalance < 0">{{$root.currency.getConvertion(-tx.valueBalance)}} ↓</span>
          </div>
        </div>
      </div>
    </div>

    <!-- JoinSplit -->
    <div data-ng-if="tx.vjoinsplit && tx.vjoinsplit.length > 0" style="margin-top: 10px;">
      <h5 style="margin: 0 0 8px 0; font-size: 13px; font-weight: 600;">
        <span class="glyphicon glyphicon-lock" style="margin-right: 6px;"></span>
        <span translate>JoinSplit Transactions</span>
      </h5>
      <table class="table" style="margin-bottom: 0; font-size: 12px;">
        <thead style="background: #f8f9fa;">
          <tr>
            <th style="padding: 6px 8px; border-bottom: 2px solid #e7eaf3; width: 40px;">#</th>
            <th style="padding: 6px 8px; border-bottom: 2px solid #e7eaf3; text-align: right;"><span translate>Public Input</span></th>
            <th style="padding: 6px 8px; border-bottom: 2px solid #e7eaf3; text-align: right;"><span translate>Public Output</span></th>
          </tr>
        </thead>
        <tbody>
          <tr data-ng-repeat="vjs in tx.vjoinsplit" style="border-bottom: 1px solid #f0f0f0;">
            <td style="padding: 6px 8px; vertical-align: middle; color: #6c757d;">{{vjs.n}}</td>
            <td style="padding: 6px 8px; vertical-align: middle; text-align: right; font-family: monospace;">{{$root.currency.getConvertion(vjs.vpub_old)}}</td>
            <td style="padding: 6px 8px; vertical-align: middle; text-align: right; font-family: monospace;">{{$root.currency.getConvertion(vjs.vpub_new)}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

</div>
